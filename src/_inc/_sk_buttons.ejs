<% 
// ----------------------------------------------------
// 1. Gulpã‹ã‚‰æ¸¡ã•ã‚ŒãŸå¤‰æ•°ã®å–å¾—
// ----------------------------------------------------
// t: ç¿»è¨³é–¢æ•° (t('key'))
// sk_buttons: ä¿®æ­£ã•ã‚ŒãŸãƒœã‚¿ãƒ³ãƒªã‚¹ãƒˆ [ã‚­ãƒ¼, ãƒ‡ãƒ¼ã‚¿å€¤, ç¯„å›²]
const t = page.t;
const sk_buttons = page.sk_buttons;

// ----------------------------------------------------
// 2. ã‚¢ã‚¤ã‚³ãƒ³å–å¾—ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° (EJSå†…ã§å®šç¾©)
// ----------------------------------------------------
const getIcon = (range) => {
    if (range === 'self') return 'ğŸ‘¤';
    if (range === 'all') return 'ğŸ‘¥';
    if (range === 'enemy') return 'ğŸ‘¹';
    return '';
};
%>

<ul class="filter_container" data-filter="sk_type" data-count="<%= sk_buttons.length %>">
    <div class="target-container target-cell" id="sk-target-container">
        <span class="target-label"><%- t('filter.target') %></span>
        <div class="target-selector">
            <button class="target-button" data-range="self">ğŸ‘¤<%- t('filter.target.self') %></button>
            <button class="target-button" data-range="all">ğŸ‘¥<%- t('filter.target.ally') %></button>
            <button class="target-button" data-range="enemy">ğŸ‘¹<%- t('filter.target.enemy') %></button>
        </div>
    </div>
    <% for (const button of sk_buttons) {
        const key = button[0]; // ä¾‹: "sk_type.mp_recovery"
        const val = button[1].split(",").map(x => page.def[x]).join(","); // ä¾‹: "MPå›å¾©" -> ãƒ‡ãƒ¼ã‚¿å€¤
        const range = button[2]; // ä¾‹: "self", "all", "enemy", ""

        const name = t(key);
        const icon = getIcon(range);

        // ã‚¢ã‚¤ã‚³ãƒ³ã¨ç¿»è¨³æ¸ˆã¿ãƒ©ãƒ™ãƒ«ã‚’çµåˆã—ã€æ˜‡é †/é™é †ãƒãƒ¼ã‚¯ã‚’HTMLã«å¤‰æ›
        const label = icon + name
        .replace(/â¬†/g, '<span class="arrow-mark up">â¬†</span>')
        .replace(/â¬‡/g, '<span class="arrow-mark down">â¬‡</span>');
    %>
        <% if (range !== "") { %>
        <li data-range="<%= range %>" data-name="<%= name %>" data-val="<%= val %>" data-check="0"><div><%- label %></div></li>
        <% } else { %>
        <li data-val="<%= val %>" data-check="0"><div><%- label %></div></li>
        <% } %>
    <% } %>
</ul>